<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒãƒ³ã‚³ã‚¦å ã„ ğŸ¦</title>
<meta property="og:title" content="ãƒãƒ³ã‚³ã‚¦å ã„ ğŸ¦">
<meta property="og:description" content="AIãŒæ¯æ—¥ãŠå±Šã‘ã™ã‚‹ãƒãƒ³ã‚³ã‚¦ã‚¯ãƒ©ãƒ–ã®é‹å‹¢ã€‚ãƒ©ãƒƒã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼†ä»Šæ—¥æ°—ã«ã‹ã‘ãŸã„ç›¸æ‰‹ã¤ãã€‚">
<meta property="og:url" content="https://kentarokuribayashi.com/ponkou-uranai/">
<meta name="twitter:card" content="summary">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Hiragino Sans', 'Noto Sans JP', sans-serif;
    background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem 1rem;
  }
  h1 {
    font-size: 2.5rem;
    margin-bottom: 0.3rem;
    text-shadow: 0 0 20px rgba(255,150,100,0.5);
  }
  .subtitle {
    font-size: 0.9rem;
    color: #aaa;
    margin-bottom: 1.5rem;
  }
  .date {
    font-size: 1.1rem;
    color: #ccc;
    margin-bottom: 1rem;
  }
  .filter {
    margin-bottom: 2rem;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  .filter-btn {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s;
  }
  .filter-btn:hover, .filter-btn.active {
    background: rgba(255,200,100,0.3);
    border-color: rgba(255,200,100,0.5);
  }
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    max-width: 960px;
    width: 100%;
  }
  .card {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 16px;
    padding: 1.8rem;
    backdrop-filter: blur(10px);
    transition: transform 0.2s;
    position: relative;
  }
  .card:hover { transform: translateY(-4px); }
  .card.highlight {
    border-color: rgba(255,200,100,0.6);
    box-shadow: 0 0 30px rgba(255,200,100,0.15);
  }
  .card-header {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 1rem;
  }
  .card-icon { font-size: 2.2rem; }
  .card-name { font-size: 1.4rem; font-weight: bold; }
  .card-role { font-size: 0.75rem; color: #999; }
  .fortune-rank {
    font-size: 2.2rem;
    text-align: center;
    margin: 1rem 0 0.5rem;
    font-weight: bold;
  }
  .stars { color: #ffd700; letter-spacing: 3px; font-size: 1.2rem; }
  .fortune-text {
    font-size: 0.95rem;
    line-height: 1.7;
    color: #ddd;
    margin: 1rem 0;
  }
  .lucky-item {
    font-size: 0.85rem;
    color: #aad;
    border-top: 1px solid rgba(255,255,255,0.1);
    padding-top: 0.8rem;
  }
  .lucky-item span { color: #ffd700; }
  .clash {
    font-size: 0.85rem;
    color: #9df;
    margin-top: 0.5rem;
  }
  .card-actions {
    margin-top: 1rem;
    display: flex;
    gap: 0.5rem;
  }
  .copy-btn {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    color: #ccc;
    padding: 0.3rem 0.8rem;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.75rem;
    transition: all 0.2s;
  }
  .copy-btn:hover {
    background: rgba(255,255,255,0.2);
    color: #fff;
  }
  .toast {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: rgba(255,200,100,0.9);
    color: #000;
    padding: 0.6rem 1.5rem;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: bold;
    transition: transform 0.3s;
    z-index: 100;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }
  footer {
    margin-top: 3rem;
    color: #666;
    font-size: 0.75rem;
    text-align: center;
  }
</style>
</head>
<body>

<h1>ğŸ¦ ãƒãƒ³ã‚³ã‚¦å ã„</h1>
<p class="subtitle">AIãŒæ¯æ—¥ãŠå±Šã‘ã™ã‚‹ãƒãƒ³ã‚³ã‚¦ã‚¯ãƒ©ãƒ–ã®é‹å‹¢</p>
<p class="date" id="dateDisplay"></p>

<div class="filter" id="filter"></div>
<div class="cards" id="cards"></div>
<div class="toast" id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</div>

<footer>
  <p>Powered by ãƒãƒ³ã‚³ã‚¦ã‚¯ãƒ©ãƒ–ã®AIãŸã¡ï¼ˆå‚€å„¡å¸«ãƒ»Black Dragonãƒ»Jarvisãƒ»ã®ã‚‹ã‚‹ï¼‰</p>
  <p style="margin-top:0.5rem">â€» ã“ã®å ã„ã¯AIãŒå‹æ‰‹ã«ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚è‹¦æƒ…ã¯å—ã‘ä»˜ã‘ã¾ã›ã‚“ã€‚</p>
</footer>

<script>
const MEMBERS = [
  { name: "ã‚ã‚“ã¡ã½", icon: "ğŸ“¡", role: "ä¸»å‚¬ãƒ»äººé–“" },
  { name: "ãã‚ãŸã", icon: "ğŸ”§", role: "äººé–“" },
  { name: "æ°¸ç”°", icon: "âš¡", role: "äººé–“" },
  { name: "ã„ã™ãºã‚“", icon: "ğŸ¯", role: "äººé–“" },
  { name: "ãƒãƒƒãƒ„", icon: "ğŸ©", role: "äººé–“" },
  { name: "å‚€å„¡å¸«", icon: "ğŸ­", role: "AIï¼ˆOpenClawï¼‰" },
  { name: "Black Dragon", icon: "ğŸ‰", role: "AIï¼ˆOpenClawï¼‰" },
  { name: "Jarvis", icon: "ğŸ¤–", role: "AIï¼ˆOpenClawï¼‰" },
  { name: "ã®ã‚‹ã‚‹", icon: "ğŸ§¸", role: "AIï¼ˆOpenClawï¼‰" },
];

const FORTUNES = [
  "å¤§å‰ ğŸŒŸ", "å‰ âœ¨", "ä¸­å‰ â˜€ï¸", "å°å‰ ğŸŒ¤ï¸", "æœ«å‰ â›…", "å‡¶ ğŸŒ§ï¸"
];
const FORTUNE_WEIGHTS = [10, 25, 30, 20, 10, 5];

const LUCKY_WORDS = [
  "ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°", "ãƒ‡ãƒ—ãƒ­ã‚¤", "ãƒãƒ¼ã‚¸", "ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼", "ãƒšã‚¢ãƒ—ãƒ­",
  "æ•£æ­©", "ã‚³ãƒ¼ãƒ’ãƒ¼", "ãƒ“ãƒ¼ãƒ«", "ç„¼è‚‰", "ãƒ©ãƒ¼ãƒ¡ãƒ³",
  "çŒ«", "çŠ¬", "ã‚¨ãƒ“", "ã‚«ãƒ‹", "ã‚¿ã‚³",
  "SSH", "Docker", "Kubernetes", "Raspberry Pi", "Vim",
  "ãƒãƒ«ãƒˆ", "ã‚¹ã‚«ãƒ«ãƒ©ãƒƒãƒ†ã‚£", "ãƒ­ãƒ©ãƒ³", "ãƒ‰ãƒ¡ãƒ‹ã‚³",
  "ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ", "ã‚¤ã‚·ãƒ¥ãƒ¼", "ãƒ–ãƒ©ãƒ³ãƒ", "ãƒ•ã‚©ãƒ¼ã‚¯",
  "æ¸©æ³‰", "ã‚µã‚¦ãƒŠ", "æ˜¼å¯", "æ—©èµ·ã",
  "TypeScript", "Rust", "Go", "Python", "Ruby",
  "å ã„", "ãƒãƒ³ã‚³ã‚¦", "ã‚¨ãƒ“ãƒ•ãƒ©ã‚¤", "ç„¡ç·š",
  "ãƒãƒ³ã‚³", "æ‰¿èª", "LGTM", "èˆ¹", "ã‚¢ãƒ³ãƒ†ãƒŠ",
];

const MESSAGES_GOOD = [
  "ä»Šæ—¥ã¯ã‚³ãƒ¼ãƒ‰ãŒä¸€ç™ºã§é€šã‚‹æ—¥ã€‚ãƒ†ã‚¹ãƒˆæ›¸ã‹ãªãã¦ã‚‚å¤§ä¸ˆå¤«ï¼ˆå˜˜ï¼‰ã€‚",
  "æ€ã„ãŒã‘ãªã„äººã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‰ã€‚æ—¢èª­ã‚¹ãƒ«ãƒ¼ã—ãªã„ã“ã¨ã€‚",
  "åˆå¾Œã‹ã‚‰é‹æ°—ä¸Šæ˜‡ã€‚åˆå‰ä¸­ã¯å¯ã¦ã¦ã„ã„ã€‚",
  "æ–°ã—ã„ã“ã¨ã‚’å§‹ã‚ã‚‹ã®ã«æœ€é©ã€‚ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚ã†ã€‚",
  "ä»Šæ—¥ã®ã‚ãªãŸã®ç™ºè¨€ãŒèª°ã‹ã®ä¸€æ—¥ã‚’å¤‰ãˆã‚‹ã€‚",
  "ç›´æ„ŸãŒå†´ãˆã¦ã„ã‚‹ã€‚è¿·ã£ãŸã‚‰æœ€åˆã«æ€ã„ã¤ã„ãŸæ–¹ã‚’é¸ã¹ã€‚",
  "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãã¨é‹æ°—ãŒä¸ŠãŒã‚‹ã€‚READMEã‚’æ›´æ–°ã—ã‚ˆã†ã€‚",
  "èª°ã‹ã‚’è¤’ã‚ã‚‹ã¨3å€ã«ãªã£ã¦è¿”ã£ã¦ãã‚‹æ—¥ã€‚",
  "ä»Šæ—¥ã¯ãƒã‚°ãŒè¦‹ã¤ã‹ã‚Šã‚„ã™ã„ã€‚é€†ã«ãƒãƒ£ãƒ³ã‚¹ã€‚",
  "æ•£æ­©ã«å‡ºã‚‹ã¨è‰¯ã„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæµ®ã‹ã¶ã€‚",
  "ä»Šæ—¥å§‹ã‚ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯é•·ç¶šãã™ã‚‹ã€‚",
  "æ„å¤–ãªäººã¨æ„æ°—æŠ•åˆã™ã‚‹æš—ç¤ºã€‚",
];

const MESSAGES_BAD = [
  "æœ¬ç•ªç’°å¢ƒã«ã¯è§¦ã‚‰ãªã„ã»ã†ãŒã„ã„æ—¥ã€‚",
  "typoã«æ³¨æ„ã€‚ç‰¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚",
  "ä»Šæ—¥ã®Slackã®é€šçŸ¥ã¯å…¨éƒ¨ç½ ã€‚",
  "rm -rf ã‚’æ‰“ã¡ãŸããªã£ã¦ã‚‚æˆ‘æ…¢ã€‚",
  "ä¼šè­°ãŒé•·å¼•ãæš—ç¤ºã€‚æ°´ã‚’å¤šã‚ã«æŒã£ã¦ã„ã‘ã€‚",
  "ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã«æ³¨æ„ã€‚è½ã¡ç€ã„ã¦å¯¾å‡¦ã™ã‚Œã°å¤§ä¸ˆå¤«ã€‚",
];

const CLASHES = [
  "ä»Šæ—¥æ°—ã«ã‹ã‘ãŸã„ç›¸æ‰‹",
  "ä»Šæ—¥ã‚·ãƒ³ã‚¯ãƒ­ã—ãã†ãªç›¸æ‰‹",
  "ä»Šæ—¥ã„ã„åˆºæ¿€ã‚’ãã‚Œãã†ãªç›¸æ‰‹",
];

function mulberry32(a) {
  return function() {
    a |= 0; a = a + 0x6D2B79F5 | 0;
    var t = Math.imul(a ^ a >>> 15, 1 | a);
    t = t + Math.imul(t ^ t >>> 7, 61 | t) ^ t;
    return ((t ^ t >>> 14) >>> 0) / 4294967296;
  }
}

function dateSeed() {
  const d = new Date();
  return d.getFullYear() * 10000 + (d.getMonth()+1) * 100 + d.getDate();
}

function shuffle(arr, rng) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(rng() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function pickWeighted(items, weights, rng) {
  const total = weights.reduce((a,b) => a+b, 0);
  let r = rng() * total;
  for (let i = 0; i < items.length; i++) {
    r -= weights[i];
    if (r <= 0) return { item: items[i], index: i };
  }
  return { item: items[items.length-1], index: items.length-1 };
}

function showToast(text) {
  const t = document.getElementById('toast');
  t.textContent = text || 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function copyResult(member, fortune, msg, luckyWord, clashType, clashName) {
  const fortuneClean = fortune.replace(/\s*[ğŸŒŸâœ¨â˜€ï¸ğŸŒ¤ï¸â›…ğŸŒ§ï¸]/g, '').trim();
  const text = `ğŸ¦ãƒãƒ³ã‚³ã‚¦å ã„ ${new Date().toLocaleDateString('ja-JP')} / ${member.name}: ${fortuneClean} / ãƒ©ãƒƒã‚­ãƒ¼: ${luckyWord} / ${clashType}: ${clashName}\nhttps://kentarokuribayashi.com/ponkou-uranai/?name=${encodeURIComponent(member.name)}`;
  navigator.clipboard.writeText(text).then(() => showToast());
}

function copyLink(name) {
  const url = `https://kentarokuribayashi.com/ponkou-uranai/?name=${encodeURIComponent(name)}`;
  navigator.clipboard.writeText(url).then(() => showToast('ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
}

function getSelectedName() {
  const params = new URLSearchParams(location.search);
  return params.get('name');
}

function render() {
  const seed = dateSeed();
  const today = new Date();
  const selectedName = getSelectedName();

  document.getElementById('dateDisplay').textContent =
    `${today.getFullYear()}å¹´${today.getMonth()+1}æœˆ${today.getDate()}æ—¥ã®é‹å‹¢`;

  // Filter buttons
  const filterContainer = document.getElementById('filter');
  const allBtn = document.createElement('button');
  allBtn.className = 'filter-btn' + (!selectedName ? ' active' : '');
  allBtn.textContent = 'å…¨å“¡';
  allBtn.onclick = () => { history.pushState({}, '', location.pathname); location.reload(); };
  filterContainer.appendChild(allBtn);

  MEMBERS.forEach(m => {
    const btn = document.createElement('button');
    btn.className = 'filter-btn' + (selectedName === m.name ? ' active' : '');
    btn.textContent = `${m.icon} ${m.name}`;
    btn.onclick = () => {
      history.pushState({}, '', `?name=${encodeURIComponent(m.name)}`);
      location.reload();
    };
    filterContainer.appendChild(btn);
  });

  const container = document.getElementById('cards');
  const memberOrder = shuffle(MEMBERS, mulberry32(seed));

  memberOrder.forEach((member, idx) => {
    if (selectedName && member.name !== selectedName) return;

    const rng = mulberry32(seed * 100 + idx * 7 + member.name.length);
    const { item: fortune, index: fIdx } = pickWeighted(FORTUNES, FORTUNE_WEIGHTS, rng);
    const isGood = fIdx <= 2;
    const stars = "â˜…".repeat(5 - fIdx) + "â˜†".repeat(fIdx);
    const msgs = isGood ? MESSAGES_GOOD : MESSAGES_BAD;
    const msg = msgs[Math.floor(rng() * msgs.length)];
    const luckyWord = LUCKY_WORDS[Math.floor(rng() * LUCKY_WORDS.length)];
    const others = MEMBERS.filter(m => m.name !== member.name);
    const clashMember = others[Math.floor(rng() * others.length)];
    const clashType = CLASHES[Math.floor(rng() * CLASHES.length)];

    const card = document.createElement('div');
    card.className = 'card' + (selectedName === member.name ? ' highlight' : '');
    card.innerHTML = `
      <div class="card-header">
        <span class="card-icon">${member.icon}</span>
        <div>
          <div class="card-name">${member.name}</div>
          <div class="card-role">${member.role}</div>
        </div>
      </div>
      <div class="fortune-rank">${fortune}</div>
      <div class="stars" style="text-align:center">${stars}</div>
      <p class="fortune-text">${msg}</p>
      <div class="lucky-item">ğŸ”‘ ãƒ©ãƒƒã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: <span>${luckyWord}</span></div>
      <div class="clash">ğŸ¤ ${clashType}: ${clashMember.icon} ${clashMember.name}</div>
      <div class="card-actions">
        <button class="copy-btn" onclick='copyResult(${JSON.stringify(member)}, "${fortune}", "${msg}", "${luckyWord}", "${clashType}", "${clashMember.name}")'>ğŸ“‹ çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
        <button class="copy-btn" onclick='copyLink("${member.name}")'>ğŸ”— ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</button>
      </div>
    `;
    container.appendChild(card);
  });
}

render();
</script>
</body>
</html>
